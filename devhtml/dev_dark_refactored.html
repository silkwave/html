<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dev Dark â€” Refactored</title>
  <style>
    /* =======================
       CSS ë³€ìˆ˜ ì •ì˜
       ======================= */
    :root {
      --bg-light: #f0f0f0;
      --card-light: #e8e8e8;
      --bg-dark: #121212;
      --card-dark: #1e1e1e;
      --accent: #f0e300;
      --muted: #6b7280;
    }

    /* =======================
       ê¸°ë³¸ ìŠ¤íƒ€ì¼
       ======================= */
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; font-family: Inter, system-ui, Segoe UI, Roboto, Helvetica, Arial; }
    body { background: var(--bg-light); color: #111; }

    /* =======================
       ì‚¬ì´íŠ¸ ì¹´ë“œ ë˜í¼
       ======================= */
    .site-wrapper {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
      gap: 20px;
      max-width: 1600px;
      margin: 40px auto;
      padding: 0 20px;
    }

    /* =======================
       ì¹´ë“œ ìŠ¤íƒ€ì¼
       ======================= */
    .site-card {
      flex: 1 1 300px;
      padding: 20px;
      border-radius: 10px;
      text-align: left;
      background: linear-gradient(180deg, rgba(255,255,255,0.72), rgba(255,255,255,0.6));
      border: 1px solid rgba(255,255,255,0.6);
      box-shadow: 0 8px 24px rgba(2,6,23,0.06);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      transition: transform 0.2s ease;
    }

    .site-card h3 { font-size: 20px; margin: 8px 0; }
    .site-card p { font-size: 14px; color: var(--muted); margin: 6px 0; }

    /* =======================
       ì¹´ë“œ ë©”ëª¨ ì˜ì—­
       ======================= */
    .card-input {
      width: 100%;
      padding: 10px;
      margin: 10px 0 12px;
      border-radius: 8px;
      font-family: monospace;
      height: 80px;
      resize: none;
      border: 1px solid #d1d5db;
    }
    .card-input:focus { outline: 2px solid rgba(0,0,0,0.08); }

    /* =======================
       ë§í¬ ë²„íŠ¼ ë¦¬ìŠ¤íŠ¸
       ======================= */
    .link-list {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin: 8px 0;
    }

    .link-button {
      display: block;
      width: 100%;
      padding: 12px 16px;
      border-radius: 12px;
      text-decoration: none;
      text-align: left;
      background: linear-gradient(180deg, rgba(255,255,255,0.18), rgba(255,255,255,0.08));
      color: #111;
      border: 1px solid rgba(255,255,255,0.35);
      box-shadow: 0 6px 18px rgba(2,6,23,0.08);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      transition: transform 0.18s ease, box-shadow 0.18s ease, background-color 0.18s ease, color 0.18s ease;
    }
    .link-button:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 10px 28px rgba(2,6,23,0.12);
      background: linear-gradient(180deg, rgba(255,255,255,0.26), rgba(255,255,255,0.12));
      color: #000;
    }
    .link-button:focus {
      outline: 3px solid rgba(0,123,255,0.25);
      outline-offset: 2px;
    }

    /* =======================
       í…Œë§ˆ í† ê¸€ ë²„íŠ¼
       ======================= */
    .theme-toggle-button {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 8px 12px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      z-index: 50;
    }

    body.dark-mode .theme-toggle-button { background: #444; color: #fff; }
    body.light-mode .theme-toggle-button { background: var(--accent); color: #111; }

    /* =======================
       ì¹´ë“œ ìºëŸ¬ì…€ ë²„íŠ¼
       ======================= */
    #cardControls {
      position: fixed;
      left: 20px;
      bottom: 20px;
      display: flex;
      gap: 8px;
      z-index: 40;
    }
    #cardControls button {
      padding: 8px 10px;
      border-radius: 6px;
      cursor: pointer;
    }

    /* =======================
       ë‹¤í¬ ëª¨ë“œ ì¹´ë“œ & ë²„íŠ¼ ìŠ¤íƒ€ì¼
       ======================= */
    body.dark-mode {
      background: var(--bg-dark);
      color: #e0e0e0;
    }
    body.dark-mode .site-card {
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.06);
    }
    body.dark-mode .link-button {
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      color: #eaeaea;
      border: 1px solid rgba(255,255,255,0.06);
    }

    /* =======================
       ëª¨ë°”ì¼ ëŒ€ì‘
       ======================= */
    @media (max-width: 768px) {
      .site-wrapper { flex-direction: column; gap: 30px; padding: 0 12px; }
    }
  </style>
</head>
<body>
  <!-- í…Œë§ˆ í† ê¸€ ë²„íŠ¼ -->
  <button class="theme-toggle-button" id="themeToggle">ğŸŒ™ ë‹¤í¬ ëª¨ë“œ</button>

  <!-- ì¹´ë“œ ìºëŸ¬ì…€ ë²„íŠ¼ -->
  <div id="cardControls">
    <button id="prevCard">â—€ ì´ì „</button>
    <button id="nextCard">ë‹¤ìŒ â–¶</button>
    <button id="toggleAll" aria-pressed="false">ëª¨ë‘ ë³´ê¸°</button>
  </div>

  <!-- ë©”ì¸ ì½˜í…ì¸  -->
  <main class="site-wrapper">
    <!-- Local Sites -->
    <section class="site-card">
      <h3>Local Sites</h3>
      <p>ìì£¼ ì‚¬ìš©í•˜ëŠ” ë¡œì»¬ ë¦¬ì†ŒìŠ¤ ë° ì‚¬ì´íŠ¸ë“¤ì…ë‹ˆë‹¤.</p>
      <textarea class="card-input" placeholder="ë©”ëª¨ ë˜ëŠ” ë§í¬ ì¶”ê°€..."></textarea>
      <ul class="link-list">
        <li><a class="link-button" href="https://www.daum.net/" target="_blank" rel="noopener">ë‹¤ìŒ</a></li>
        <li><a class="link-button" href="https://www.naver.com/" target="_blank" rel="noopener">ë„¤ì´ë²„</a></li>
        <li><a class="link-button" href="https://www.bing.com/" target="_blank" rel="noopener">ë¹™</a></li>
        <li><a class="link-button" href="https://www.kakao.com/" target="_blank" rel="noopener">ì¹´ì¹´ì˜¤</a></li>
      </ul>
    </section>

    <!-- Dev Sites -->
    <section class="site-card">
      <h3>Dev Sites</h3>
      <p>ê°œë°œ ë° í”„ë¡œê·¸ë˜ë°ì— ìœ ìš©í•œ ë§í¬ë“¤ì…ë‹ˆë‹¤.</p>
      <textarea class="card-input" placeholder="ë©”ëª¨ ë˜ëŠ” ë§í¬ ì¶”ê°€..."></textarea>
      <ul class="link-list">
        <li><a class="link-button" href="https://www.google.co.kr/" target="_blank" rel="noopener">êµ¬ê¸€</a></li>
        <li><a class="link-button" href="https://www.youtube.com/" target="_blank" rel="noopener">ìœ íŠœë¸Œ</a></li>
        <li><a class="link-button" href="https://mvnrepository.com/" target="_blank" rel="noopener">Maven</a></li>
        <li><a class="link-button" href="https://www.github.com/" target="_blank" rel="noopener">GitHub</a></li>
        <li><a class="link-button" href="https://www.stackoverflow.com/" target="_blank" rel="noopener">Stack Overflow</a></li>
      </ul>
    </section>

    <!-- TEST Sites -->
    <section class="site-card">
      <h3>TEST Sites</h3>
      <p>í…ŒìŠ¤íŠ¸ ë° ê°œë°œ ëª©ì ì˜ ì‚¬ì´íŠ¸ë“¤ì…ë‹ˆë‹¤.</p>
      <textarea class="card-input" placeholder="ë©”ëª¨ ë˜ëŠ” ë§í¬ ì¶”ê°€..."></textarea>
      <ul class="link-list">
        <li><a class="link-button" href="https://www.example.com/" target="_blank" rel="noopener">Example</a></li>
        <li><a class="link-button" href="https://www.test.com/" target="_blank" rel="noopener">Test</a></li>
        <li><a class="link-button" href="https://www.placeholder.com/" target="_blank" rel="noopener">Placeholder</a></li>
      </ul>
    </section>
  </main>

  <script>
    // =======================
    // ì¹´ë“œ ìºëŸ¬ì…€ ê¸°ëŠ¥
    // =======================
    (function() {
      const cards = Array.from(document.querySelectorAll('.site-card'));
      let index = 0;
      const prevBtn = document.getElementById('prevCard');
      const nextBtn = document.getElementById('nextCard');
      const toggleAll = document.getElementById('toggleAll');
      let showAll = false;

      function updateView() {
        if (showAll) {
          document.querySelector('.site-wrapper').style.display = 'flex';
          cards.forEach(c => c.style.display = 'block');
          prevBtn.disabled = true;
          nextBtn.disabled = true;
          toggleAll.setAttribute('aria-pressed','true');
          return;
        }
        document.querySelector('.site-wrapper').style.display = 'block';
        cards.forEach((c,i) => { c.style.display = i === index ? 'block' : 'none'; });
        prevBtn.disabled = index === 0;
        nextBtn.disabled = index === cards.length-1;
        toggleAll.setAttribute('aria-pressed','false');
      }

      prevBtn.addEventListener('click', () => { index = Math.max(0, index-1); updateView(); });
      nextBtn.addEventListener('click', () => { index = Math.min(cards.length-1, index+1); updateView(); });
      toggleAll.addEventListener('click', () => { showAll = !showAll; updateView(); });

      updateView();
    })();

    // =======================
    // í…Œë§ˆ í† ê¸€ ê¸°ëŠ¥
    // =======================
    const themeToggle = document.getElementById("themeToggle");
    const savedTheme = localStorage.getItem("theme");
    function applyTheme(t) {
      document.body.classList.toggle("dark-mode", t === "dark");
      document.body.classList.toggle("light-mode", t === "light");
      themeToggle.textContent = t === "dark" ? "ğŸŒ™ ë‹¤í¬ ëª¨ë“œ" : "ğŸŒ ë¼ì´íŠ¸ ëª¨ë“œ";
    }
    applyTheme(savedTheme || "dark");
    themeToggle.addEventListener("click", () => {
      const next = document.body.classList.contains("dark-mode") ? "light" : "dark";
      applyTheme(next);
      localStorage.setItem("theme", next);
    });

    // =======================
    // ì¹´ë“œ ë©”ëª¨ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì €ì¥ (ë””ë°”ìš´ìŠ¤)
    // =======================
    function bindDebouncedSave(el, key, delay=300) {
      el.value = localStorage.getItem(key) || "";
      let tid;
      el.addEventListener("input", () => {
        clearTimeout(tid);
        tid = setTimeout(() => localStorage.setItem(key, el.value), delay);
      });
    }
    document.querySelectorAll(".card-input").forEach((el,i) => bindDebouncedSave(el, `card-input-${i}`));
  </script>
</body>
</html>
