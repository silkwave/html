<!doctype html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>JSON ë·°ì–´ â€” ì¢Œìš° ë°°ì¹˜ (PC ê³ ì •)</title>

    <style>
        /* ğŸ¨ í…Œë§ˆ ë³€ìˆ˜ */
        :root {
            --bg: #0f1720;
            --card: #0b1220;
            --muted: #9aa6b2;
            --accent: #4cc9f0;
            --key-color: #93c5fd;
            --string-color: #fbbf24;
            --number-color: #34d399;
            --boolean-color: #f87171;
            --null-color: #a78bfa;
        }
        .theme-green { --accent: #34d399; }
        .theme-red { --accent: #f87171; }


        /* ğŸ§± ê¸°ë³¸ ì„¤ì • */
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 2rem;
            background: var(--bg);
            color: #e5e7eb;
            font-family: "JetBrains Mono", Consolas, monospace;
            line-height: 1.6;
            display: flex;
            justify-content: center;
        }

        main {
            width: 100%;
            max-width: 1600px;
            display: flex;
            flex-direction: column;
            gap: 1.2rem;
        }

        header {
            text-align: center;
        }

        header h1 {
            color: var(--accent);
            font-size: 1.5rem;
            margin: 0;
        }

        /* ğŸ”˜ ë²„íŠ¼ */
        .action-bar {
            margin-bottom: 0.5rem;
            display: flex;
            justify-content: center;
            gap: 0.75rem;
        }

        button {
            background: var(--accent);
            border: none;
            border-radius: 6px;
            color: var(--bg);
            font-weight: bold;
            font-size: 0.95rem;
            padding: 0.6rem 1.2rem;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        #copyBtn { background: var(--number-color); }
        #copyBtn:hover { background: #6ee7b7; }
        #clearBtn { background: var(--boolean-color); }
        #clearBtn:hover { background: #fca5a5; }

        button:hover {
            background: #73dff5;
        }

        /* ğŸ“„ ì¢Œìš° ë ˆì´ì•„ì›ƒ */
        .viewer-container {
            display: flex;
            gap: 1rem;
            justify-content: space-between;
            align-items: stretch;
        }

        textarea,
        pre {
            flex: 1;
            background: var(--card);
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 1rem;
            color: #fff;
            font-size: 0.95rem;
            line-height: 1.4;
            overflow: auto;
            min-height: 600px;
        }

        textarea {
            resize: none;
            flex: 0.45;
            /* ì¢Œì¸¡ 45% */
        }

        pre {
            flex: 0.55;
            /* ìš°ì¸¡ 55% */
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        /* ğŸŒˆ êµ¬ë¬¸ ê°•ì¡° */
        .key {
            color: var(--key-color);
        }

        .string {
            color: var(--string-color);
        }

        .number {
            color: var(--number-color);
        }

        .boolean {
            color: var(--boolean-color);
        }

        .null {
            color: var(--null-color);
        }
    </style>
</head>

<body>
    <main aria-label="JSON Viewer">
        <header>
            <h1>ğŸ§© JSON ë·°ì–´</h1>
        </header>

        <div class="action-bar">
            <button onclick="renderJson()" title="ì…ë ¥ëœ JSONì„ í¬ë§·í•˜ì—¬ ë³´ì—¬ì¤ë‹ˆë‹¤.">ë³´ê¸°</button>
            <button onclick="copyOutput()" id="copyBtn" title="ê²°ê³¼ì°½ì˜ ë‚´ìš©ì„ ë³µì‚¬í•©ë‹ˆë‹¤.">ë³µì‚¬</button>
            <button onclick="clearAll()" id="clearBtn" title="ì…ë ¥ê³¼ ê²°ê³¼ë¥¼ ëª¨ë‘ ì§€ì›ë‹ˆë‹¤.">ì´ˆê¸°í™”</button>
        </div>

        <section class="viewer-container">
            <textarea id="jsonInput" placeholder="ì—¬ê¸°ì— JSON ì…ë ¥..." aria-label="JSON ì…ë ¥">
{\"name\" : \"apple\", \"id\" : 1, \"price\" : 1000}                
            </textarea>
            <pre id="jsonOutput" aria-label="JSON ì¶œë ¥"></pre>
        </section>
    </main>

    <script>
        /* âœ… JSON íŒŒì‹± ë° ë Œë”ë§ (JSëŠ” ë³€ê²½í•˜ì§€ ì•ŠìŒ) */
        /**
         * ì…ë ¥ëœ JSON í…ìŠ¤íŠ¸ë¥¼ íŒŒì‹±í•˜ê³  ì˜ˆì˜ê²Œ í¬ë§·í•˜ì—¬ ì¶œë ¥í•©ë‹ˆë‹¤.
         * Java ë¬¸ìì—´ í˜•ì‹ì˜ JSON (ì˜ˆ: {\"key\":\"value\"})ì„ ìë™ìœ¼ë¡œ ê°ì§€í•˜ê³  ë³€í™˜í•©ë‹ˆë‹¤.
         */
        function renderJson() {
            let input = document.getElementById('jsonInput').value;
            if (!input.trim()) return; // ì…ë ¥ì´ ì—†ìœ¼ë©´ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ
            const output = document.getElementById('jsonOutput');

            try {
                // Java ë¬¸ìì—´ í˜•ì‹ì˜ JSONì¼ ê²½ìš°, ì´ìŠ¤ì¼€ì´í”„ëœ ë”°ì˜´í‘œ(\")ë¥¼ ì¼ë°˜ ë”°ì˜´í‘œ(")ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
                // JSON.parseëŠ” ë¬¸ìì—´ ë‚´ì˜ ìœ íš¨í•œ ì´ìŠ¤ì¼€ì´í”„ ì‹œí€€ìŠ¤(ì˜ˆ: \\)ëŠ” ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
                const processedInput = input.replace(/\\"/g, '"');
                const obj = JSON.parse(processedInput);
                const formattedJson = JSON.stringify(obj, null, 2);
                output.innerHTML = syntaxHighlight(formattedJson);
                // ìƒíƒœ ë©”ì‹œì§€ëŠ” ë‹¤ë¥¸ í•¨ìˆ˜ì—ì„œ ì²˜ë¦¬í•˜ë¯€ë¡œ ì—¬ê¸°ì„œëŠ” ìƒëµ
            } catch (err) {
                output.innerHTML = `<span style="color:var(--boolean-color)">âŒ JSON íŒŒì‹± ì˜¤ë¥˜:</span> ${err.message}`;
            }
        }

        /**
         * ê²°ê³¼ì°½ì˜ í…ìŠ¤íŠ¸ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í•©ë‹ˆë‹¤.
         */
        function copyOutput() {
            const output = document.getElementById('jsonOutput');
            const textToCopy = output.innerText;

            if (!textToCopy || textToCopy.startsWith('âŒ')) {
                alert("ë³µì‚¬í•  ìœ íš¨í•œ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.");
                return;
            }

            navigator.clipboard.writeText(textToCopy).then(() => {
                alert("ğŸ“‹ ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
            }).catch(err => {
                alert("ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.");
                console.error('Copy failed', err);
            });
        }

        /**
         * ì…ë ¥ì°½ê³¼ ê²°ê³¼ì°½ì˜ ë‚´ìš©ì„ ëª¨ë‘ ì§€ì›ë‹ˆë‹¤.
         */
        function clearAll() {
            if (confirm("ì…ë ¥ê³¼ ê²°ê³¼ë¥¼ ëª¨ë‘ ì§€ìš°ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                document.getElementById('jsonInput').value = '';
                document.getElementById('jsonOutput').innerHTML = '';
            }
        }

        function syntaxHighlight(json) {
            let highlighted = json
                .replace(/&/g, "&amp;")
                .replace(/>/g, "&gt;")
                .replace(/</g, "&lt;");

            // ì •ê·œì‹ì„ ì—¬ëŸ¬ ì¤„ë¡œ ë‚˜ëˆ„ì–´ ê°€ë…ì„±ì„ ë†’ì…ë‹ˆë‹¤.
            // RegExp ìƒì„±ìë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ë°±ìŠ¬ë˜ì‹œ(\)ëŠ” ì´ìŠ¤ì¼€ì´í”„ ì²˜ë¦¬(\\)í•´ì•¼ í•©ë‹ˆë‹¤.
            // ë˜í•œ, ê¸°ì¡´ ì •ê·œì‹ì— í¬í•¨ëœ ë¶ˆí•„ìš”í•œ ê³µë°±ì„ ì œê±°í•˜ì—¬ JSON ë¬¸ìì—´ íŒŒì‹± ì˜¤ë¥˜ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.
            const regex = new RegExp([
                // 1. ë¬¸ìì—´ (í‚¤ ë˜ëŠ” ê°’): "key" ë˜ëŠ” "value"
                '("',                  // ì‹œì‘ ë”°ì˜´í‘œ
                '(?:',                 // ë¹„ìº¡ì²˜ ê·¸ë£¹ ì‹œì‘ (ë¬¸ìì—´ ë‚´ìš©)
                '\\\\u[a-zA-Z0-9]{4}', // ìœ ë‹ˆì½”ë“œ ì´ìŠ¤ì¼€ì´í”„ ì‹œí€€ìŠ¤ (ì˜ˆ: \u0022)
                '|',
                '\\\\[^u]',            // ë‹¤ë¥¸ ì´ìŠ¤ì¼€ì´í”„ ì‹œí€€ìŠ¤ (ì˜ˆ: \n, \t, \", \\ ë“±, ë‹¨ \u ì œì™¸)
                '|',
                '[^\\\\"]',            // ë°±ìŠ¬ë˜ì‹œë‚˜ ë”°ì˜´í‘œê°€ ì•„ë‹Œ ëª¨ë“  ë¬¸ì
                ')*?',                 // 0íšŒ ì´ìƒ ë°˜ë³µ (non-greedy)
                '"',                   // ë ë”°ì˜´í‘œ
                '(\\s*:)?',            // í‚¤ ë’¤ì— ì˜¤ëŠ” ì½œë¡  (ì„ íƒì  ê³µë°± í¬í•¨)
                ')',                   // ë¬¸ìì—´ ì „ì²´ ê·¸ë£¹ ë
                '|',
                // 2. ë¶ˆë¦¬ì–¸ ë° null ê°’
                '\\b(true|false|null)\\b',
                '|',
                // 3. ìˆ«ì (ì •ìˆ˜, ì‹¤ìˆ˜, ì§€ìˆ˜ í‘œê¸°ë²•) - ê° ë¶€ë¶„ì„ ì¡°í•©
                '-?',                     // ë¶€í˜¸ (ì„ íƒ)
                '\\d+',                   // ì •ìˆ˜ ë¶€ë¶„
                '(?:\\.\\d*)?',           // ì†Œìˆ˜ì  ì´í•˜ ë¶€ë¶„ (ì„ íƒ)
                '(?:[eE][+\\-]?\\d+)?'    // ì§€ìˆ˜ ë¶€ë¶„ (ì„ íƒ)
            ].join(''), 'g');

            return highlighted.replace(regex, match => {
                let cls = 'number';
                if (/^"/.test(match)) cls = /:$/.test(match) ? 'key' : 'string';
                else if (/true|false/.test(match)) cls = 'boolean';
                else if (/null/.test(match)) cls = 'null';
                return `<span class="${cls}">${match}</span>`;
            });
        }
    </script>
</body>

</html>